<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Simple Snake Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            font-family: Arial, sans-serif;
        }

        canvas {
            border: 1px solid #000;
            background-color: #eee;
        }
    </style>
</head>

<body>
    <canvas id="game" width="400" height="400"></canvas>
    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');

        const gridSize = 20;  // size of each square
        const tileCount = canvas.width / gridSize;

        let snake = [{ x: 10, y: 10 }];  // initial snake position
        let velocityX = 0;
        let velocityY = 0;

        let food = { x: 15, y: 15 };

        let score = 0;

        // Game loop runs at ~10 frames per second
        setInterval(gameLoop, 100);

        document.addEventListener('keydown', e => {
            switch (e.key) {
                case 'ArrowUp':
                    if (velocityY === 1) break;  // prevent reverse
                    velocityX = 0;
                    velocityY = -1;
                    break;
                case 'ArrowDown':
                    if (velocityY === -1) break;
                    velocityX = 0;
                    velocityY = 1;
                    break;
                case 'ArrowLeft':
                    if (velocityX === 1) break;
                    velocityX = -1;
                    velocityY = 0;
                    break;
                case 'ArrowRight':
                    if (velocityX === -1) break;
                    velocityX = 1;
                    velocityY = 0;
                    break;
            }
        });

        function gameLoop() {
            // Move snake head
            let head = { x: snake[0].x + velocityX, y: snake[0].y + velocityY };

            // Wall collision
            if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                resetGame();
                return;
            }

            // Self collision
            for (let segment of snake) {
                if (segment.x === head.x && segment.y === head.y) {
                    resetGame();
                    return;
                }
            }

            snake.unshift(head);

            // Eat food
            if (head.x === food.x && head.y === food.y) {
                score++;
                placeFood();
            } else {
                snake.pop();
            }

            drawGame();
        }

        function placeFood() {
            food.x = Math.floor(Math.random() * tileCount);
            food.y = Math.floor(Math.random() * tileCount);

            // Avoid placing food on snake
            for (let segment of snake) {
                if (segment.x === food.x && segment.y === food.y) {
                    placeFood();
                    break;
                }
            }
        }

        function drawGame() {
            ctx.fillStyle = '#eee';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = 'red';
            ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);

            ctx.fillStyle = 'green';
            for (let segment of snake) {
                ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize, gridSize);
            }

            ctx.fillStyle = 'black';
            ctx.font = "20px Arial";
            ctx.fillText("Score: " + score, 10, 20);
        }

        function resetGame() {
            snake = [{ x: 10, y: 10 }];
            velocityX = 0;
            velocityY = 0;
            score = 0;
            placeFood();
        }
    </script>
</body>

</html>